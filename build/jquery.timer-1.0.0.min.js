/*! jQuery.timer v1.0.0 https://github.com/soloproyectos/jquery.timer | https://raw.github.com/soloproyectos/jquery.timer/master/LICENSE */
(function(e){function n(e,t){this._delay=e;this._callback=t;this._maxCount=Number.POSITIVE_INFINITY;this._count=0;this._pausedTime=0;this._currentTime=(new Date).getTime();this._lastTime=this._currentTime;this._interval=null;this._state=n.STOP}var t="timer";n.STOP="stop";n.PLAY="play";n.PAUSE="pause";n.prototype.getCount=function(){return this._count};n.prototype.getDelay=function(){return this._delay};n.prototype.setDelay=function(e){this._delay=e;if(this.isRunning()){this.play()}return this};n.prototype.getState=function(){return this._state};n.prototype.isPaused=function(){return this.getState()==n.PAUSE};n.prototype.isRunning=function(){return this.getState()==n.PLAY};n.prototype.isStopped=function(){return this.getState()==n.STOP};n.prototype.getCurrentTime=function(){return this.isRunning()?(new Date).getTime()-this._pausedTime:this._currentTime};n.prototype.getRemainingTime=function(){var e=this.getElapsedTime();var t=this._delay>0?Math.ceil((e+1)/this._delay)*this._delay-e:0;return t};n.prototype.getElapsedTime=function(){return this.getCurrentTime()-this._lastTime};n.prototype.start=function(e){this._maxCount=typeof e=="undefined"?Number.POSITIVE_INFINITY:e;this.stop();this.play();return this};n.prototype.stop=function(){clearTimeout(this._interval);clearInterval(this._interval);this._count=0;this._pausedTime=0;this._currentTime=(new Date).getTime();this._lastTime=this._currentTime;this._state=n.STOP;return this};n.prototype.play=function(e){var t=this;if(this._maxCount>0){this.pause();this._interval=setTimeout(function(){t._lastTime=t.getCurrentTime();t._count++;t._callback.apply(t);t._maxCount--;if(t._maxCount>0){t._interval=setInterval(function(){t._lastTime=t.getCurrentTime();t._count++;t._callback.apply(t);t._maxCount--;if(t._maxCount<=0){t.stop()}},t._delay)}else{t.stop()}},this.getRemainingTime());this._pausedTime=(new Date).getTime()-this._currentTime;this._state=n.PLAY}else{this.stop()}return this};n.prototype.pause=function(){clearTimeout(this._interval);clearInterval(this._interval);this._currentTime=this.getCurrentTime();this._state=n.PAUSE;return this};n.prototype.toggle=function(){if(this.isRunning()){this.pause()}else{this.play()}return this};n.prototype.once=function(){return this.start(1)};e[t]=function(e,t){return new n(e,t)}})(jQuery)
